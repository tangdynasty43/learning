# Pythonæ–‡ä»¶é—´æ•°æ®äº’é€šç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„Pythonæ–‡ä»¶é—´æ•°æ®äº’é€šè§£å†³æ–¹æ¡ˆï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨ä¸åŒçš„Pythonæ–‡ä»¶ä¹‹é—´é«˜æ•ˆåœ°å…±äº«å’Œç®¡ç†æ•°æ®ã€‚

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿé€šè¿‡JSONæ–‡ä»¶ä½œä¸ºä¸­é—´å­˜å‚¨åª’ä»‹ï¼Œå®ç°äº†å¤šä¸ªPythonæ–‡ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ã€çŠ¶æ€åŒæ­¥å’Œåè°ƒæ‰§è¡Œã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
my_project/
â”œâ”€â”€ utils.py                           # å·¥å…·å‡½æ•°ï¼ˆç¯å¢ƒå˜é‡ã€é¡¹ç›®æ ¹ç›®å½•ï¼‰
â”œâ”€â”€ data_manager.py                     # æ ¸å¿ƒæ•°æ®ç®¡ç†å™¨
â”œâ”€â”€ file_a_producer.py                  # æ•°æ®ç”Ÿäº§è€…ç¤ºä¾‹
â”œâ”€â”€ file_b_consumer.py                  # æ•°æ®æ¶ˆè´¹è€…ç¤ºä¾‹
â”œâ”€â”€ data_coordinator.py                 # æ•°æ®åè°ƒå™¨ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰
â”œâ”€â”€ demo_data_communication.py          # åŸºç¡€æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ test_change_intime.py               # åŸå§‹Excelå¤„ç†æ–‡ä»¶
â””â”€â”€ README_æ•°æ®äº’é€šç³»ç»Ÿ.md              # æœ¬æ–‡æ¡£

data/                                   # å…±äº«æ•°æ®ç›®å½•
â”œâ”€â”€ *.json                             # å„ç§å…±äº«æ•°æ®æ–‡ä»¶
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®ç®¡ç†å™¨ (`data_manager.py`)

**ä¸»è¦ç‰¹æ€§ï¼š**
- âœ… å•ä¾‹æ¨¡å¼ï¼Œç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹
- âœ… JSONæ ¼å¼å­˜å‚¨ï¼Œè·¨å¹³å°å…¼å®¹
- âœ… è‡ªåŠ¨ç›®å½•åˆ›å»ºå’Œç®¡ç†
- âœ… å®Œæ•´çš„CRUDæ“ä½œï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- âœ… æ•°æ®ä¿¡æ¯æŸ¥è¯¢ï¼ˆå¤§å°ã€ä¿®æ”¹æ—¶é—´ç­‰ï¼‰
- âœ… é”™è¯¯å¤„ç†å’Œå¼‚å¸¸ç®¡ç†

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```python
from data_manager import get_data_manager, save_data, load_data

# ä¿å­˜æ•°æ®
save_data("key", {"data": "value"})

# è¯»å–æ•°æ®
data = load_data("key")

# è·å–ç®¡ç†å™¨å®ä¾‹
dm = get_data_manager()
dm.list_shared_data()  # åˆ—å‡ºæ‰€æœ‰æ•°æ®
dm.delete_shared_data("key")  # åˆ é™¤æ•°æ®
```

### 2. æ•°æ®ç”Ÿäº§è€… (`file_a_producer.py`)

**åŠŸèƒ½ï¼š**
- ğŸ“Š å¤„ç†Excelæ•°æ®ï¼ˆåŸºäºåŸæœ‰çš„`test_change_intime.py`é€»è¾‘ï¼‰
- ğŸ“ ç”Ÿæˆç”¨æˆ·å’Œé¡¹ç›®ç¤ºä¾‹æ•°æ®
- ğŸ“‹ ä¿å­˜å¤„ç†ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯
- ğŸ”„ æ›´æ–°å¤„ç†çŠ¶æ€

**ç”Ÿæˆçš„æ•°æ®ï¼š**
- `excel_processing_result`: Excelå¤„ç†ç»“æœ
- `excel_stats`: æ•°æ®ç»Ÿè®¡ä¿¡æ¯
- `users`: ç”¨æˆ·æ•°æ®
- `projects`: é¡¹ç›®æ•°æ®
- `processing_status`: å¤„ç†çŠ¶æ€

### 3. æ•°æ®æ¶ˆè´¹è€… (`file_b_consumer.py`)

**åŠŸèƒ½ï¼š**
- ğŸ“– è¯»å–ç”Ÿäº§è€…ç”Ÿæˆçš„æ‰€æœ‰æ•°æ®
- ğŸ“Š ç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š
- ğŸ‘ï¸ ç›‘æ§å¤„ç†çŠ¶æ€
- â³ ç­‰å¾…æ•°æ®å¯ç”¨æ€§

### 4. æ•°æ®åè°ƒå™¨ (`data_coordinator.py`)

**é«˜çº§åŠŸèƒ½ï¼š**
- ğŸ¯ åè°ƒå¤šæ–‡ä»¶æ‰§è¡Œé¡ºåº
- ğŸ“ è®°å½•æ‰§è¡Œæ—¥å¿—
- â³ ç­‰å¾…æ•°æ®ä¾èµ–
- ğŸ”„ ç›‘æ§æ•°æ®å˜åŒ–
- ğŸ“‹ ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
- ğŸ® äº¤äº’å¼ç®¡ç†ç•Œé¢

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨

1. **è¿è¡ŒåŸºç¡€æ¼”ç¤ºï¼š**
```bash
python demo_data_communication.py
```

2. **å•ç‹¬è¿è¡Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼š**
```bash
# å…ˆè¿è¡Œç”Ÿäº§è€…
python file_a_producer.py

# å†è¿è¡Œæ¶ˆè´¹è€…
python file_b_consumer.py
```

### é«˜çº§ä½¿ç”¨

1. **è¿è¡Œåè°ƒå™¨ï¼ˆè‡ªåŠ¨æ¨¡å¼ï¼‰ï¼š**
```bash
python data_coordinator.py
# é€‰æ‹© 1 - è‡ªåŠ¨è¿è¡Œå®Œæ•´æµæ°´çº¿
```

2. **è¿è¡Œåè°ƒå™¨ï¼ˆäº¤äº’æ¨¡å¼ï¼‰ï¼š**
```bash
python data_coordinator.py
# é€‰æ‹© 2 - äº¤äº’å¼æ¼”ç¤º
```

## ğŸ’¡ å®ç°åŸç†

### æ•°æ®å­˜å‚¨æœºåˆ¶

1. **å­˜å‚¨æ ¼å¼ï¼š** JSONæ–‡ä»¶
2. **å­˜å‚¨ä½ç½®ï¼š** `C:\Users\ç”¨æˆ·å\python\data\`
3. **æ–‡ä»¶å‘½åï¼š** `{æ•°æ®é”®å}.json`
4. **ç¼–ç æ ¼å¼ï¼š** UTF-8ï¼Œæ”¯æŒä¸­æ–‡

### æ•°æ®åŒæ­¥æœºåˆ¶

1. **å†™å…¥åŒæ­¥ï¼š** ç«‹å³å†™å…¥ç£ç›˜
2. **è¯»å–å®æ—¶ï¼š** æ¯æ¬¡è¯»å–æœ€æ–°æ–‡ä»¶å†…å®¹
3. **å¹¶å‘å®‰å…¨ï¼š** åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„åŸå­æ“ä½œ
4. **é”™è¯¯æ¢å¤ï¼š** è‡ªåŠ¨å¤„ç†æ–‡ä»¶ä¸å­˜åœ¨ç­‰å¼‚å¸¸

### ä¾èµ–ç®¡ç†

```python
# ç­‰å¾…ç‰¹å®šæ•°æ®å¯ç”¨
def wait_for_data(key, timeout=60):
    while timeout > 0:
        data = load_data(key)
        if data is not None:
            return data
        time.sleep(1)
        timeout -= 1
    return None
```

## ğŸ¨ åº”ç”¨åœºæ™¯

### 1. æ•°æ®å¤„ç†æµæ°´çº¿
- æ–‡ä»¶Aå¤„ç†åŸå§‹æ•°æ®
- æ–‡ä»¶Bè¿›è¡Œæ•°æ®æ¸…æ´—
- æ–‡ä»¶Cç”ŸæˆæŠ¥å‘Š

### 2. é…ç½®ç®¡ç†
- ä¸­å¤®é…ç½®æ–‡ä»¶
- å¤šæ¨¡å—å…±äº«é…ç½®
- åŠ¨æ€é…ç½®æ›´æ–°

### 3. çŠ¶æ€åŒæ­¥
- è¿›åº¦ç›‘æ§
- çŠ¶æ€é€šçŸ¥
- é”™è¯¯æŠ¥å‘Š

### 4. ç¼“å­˜ç³»ç»Ÿ
- è®¡ç®—ç»“æœç¼“å­˜
- ä¸´æ—¶æ•°æ®å­˜å‚¨
- ä¼šè¯æ•°æ®ç®¡ç†

## ğŸ“Š æ€§èƒ½ç‰¹ç‚¹

### ä¼˜åŠ¿
- âœ… **ç®€å•æ˜“ç”¨ï¼š** æ— éœ€å¤æ‚é…ç½®
- âœ… **è·¨å¹³å°ï¼š** JSONæ ¼å¼é€šç”¨
- âœ… **å¯è¯»æ€§å¼ºï¼š** äººç±»å¯è¯»çš„æ•°æ®æ ¼å¼
- âœ… **è°ƒè¯•å‹å¥½ï¼š** å¯ç›´æ¥æŸ¥çœ‹æ•°æ®æ–‡ä»¶
- âœ… **æŒä¹…åŒ–ï¼š** ç¨‹åºé‡å¯åæ•°æ®ä»ç„¶å­˜åœ¨

### é™åˆ¶
- âš ï¸ **æ€§èƒ½ï¼š** é€‚åˆä¸­å°è§„æ¨¡æ•°æ®
- âš ï¸ **å¹¶å‘ï¼š** ä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯
- âš ï¸ **ç±»å‹ï¼š** ä»…æ”¯æŒJSONå¯åºåˆ—åŒ–ç±»å‹

## ğŸ”§ æ‰©å±•å»ºè®®

### æ•°æ®åº“æ”¯æŒ
```python
# å¯æ‰©å±•ä¸ºæ•°æ®åº“å­˜å‚¨
class DatabaseDataManager:
    def save_shared_data(self, key, data):
        # å­˜å‚¨åˆ°æ•°æ®åº“
        pass
```

### ç½‘ç»œæ”¯æŒ
```python
# å¯æ‰©å±•ä¸ºç½‘ç»œå…±äº«
class NetworkDataManager:
    def save_shared_data(self, key, data):
        # å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨
        pass
```

### ç¼“å­˜ä¼˜åŒ–
```python
# æ·»åŠ å†…å­˜ç¼“å­˜
class CachedDataManager:
    def __init__(self):
        self.cache = {}
    
    def load_shared_data(self, key):
        if key in self.cache:
            return self.cache[key]
        # ä»æ–‡ä»¶åŠ è½½å¹¶ç¼“å­˜
```

## ğŸ›¡ï¸ æœ€ä½³å®è·µ

### 1. æ•°æ®å‘½åè§„èŒƒ
```python
# å¥½çš„å‘½å
save_data("user_profile", data)
save_data("processing_status", status)
save_data("config_database", config)

# é¿å…çš„å‘½å
save_data("data", data)  # å¤ªé€šç”¨
save_data("temp", data)  # ä¸æ˜ç¡®
```

### 2. é”™è¯¯å¤„ç†
```python
try:
    data = load_data("important_data")
    if data is None:
        # å¤„ç†æ•°æ®ä¸å­˜åœ¨çš„æƒ…å†µ
        data = get_default_data()
except Exception as e:
    # å¤„ç†å…¶ä»–å¼‚å¸¸
    log_error(f"æ•°æ®åŠ è½½å¤±è´¥: {e}")
```

### 3. æ•°æ®éªŒè¯
```python
def validate_user_data(data):
    required_fields = ['id', 'name', 'email']
    return all(field in data for field in required_fields)

if validate_user_data(user_data):
    save_data("user", user_data)
```

## ğŸ“ˆ ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹æ•°æ®ç›®å½•
```bash
# Windows
dir C:\Users\%USERNAME%\python\data

# æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶
type C:\Users\%USERNAME%\python\data\users.json
```

### æ•°æ®å¤§å°ç›‘æ§
```python
dm = get_data_manager()
for key in dm.list_shared_data():
    info = dm.get_data_info(key)
    print(f"{key}: {info['size_bytes']} bytes")
```

## ğŸ‰ æ€»ç»“

è¿™ä¸ªæ•°æ®äº’é€šç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„è§£å†³æ–¹æ¡ˆï¼Œè®©Pythonæ–‡ä»¶ä¹‹é—´èƒ½å¤Ÿè½»æ¾å…±äº«æ•°æ®ã€‚é€šè¿‡JSONæ–‡ä»¶ä½œä¸ºä¸­é—´åª’ä»‹ï¼Œå®ç°äº†ï¼š

- ğŸ”„ **æ•°æ®å…±äº«**ï¼šå¤šæ–‡ä»¶é—´æ— ç¼æ•°æ®ä¼ é€’
- ğŸ“Š **çŠ¶æ€åŒæ­¥**ï¼šå®æ—¶çŠ¶æ€æ›´æ–°å’Œç›‘æ§
- ğŸ¯ **æµç¨‹åè°ƒ**ï¼šè‡ªåŠ¨åŒ–çš„æ‰§è¡Œæµæ°´çº¿
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**ï¼šç¨‹åºé‡å¯åæ•°æ®ä¿æŒ
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

æ— è®ºæ˜¯ç®€å•çš„é…ç½®å…±äº«ï¼Œè¿˜æ˜¯å¤æ‚çš„æ•°æ®å¤„ç†æµæ°´çº¿ï¼Œè¿™ä¸ªç³»ç»Ÿéƒ½èƒ½æä¾›å¯é çš„æ”¯æŒã€‚