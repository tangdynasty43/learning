# 提示工程指南

提示工程（Prompt Engineering）是设计和优化提示（Prompts）以有效地与大型语言模型（LLM）交互的技术。本指南将介绍提示工程的基本概念、常用技巧和最佳实践。

## 基本概念

### 什么是提示（Prompt）？

提示是输入给LLM的文本，用于指导模型生成特定的输出。一个好的提示能够清晰地表达你的意图，并引导模型生成符合预期的回复。

### 提示的组成部分

一个完整的提示通常包含以下部分：

1. **指令（Instruction）**：告诉模型需要做什么
2. **上下文（Context）**：提供背景信息
3. **输入数据（Input Data）**：需要模型处理的具体内容
4. **输出指示（Output Indicator）**：期望的输出格式或类型

## 基本提示技巧

### 1. 清晰明确的指令

```
# 不好的例子
告诉我关于气候变化的信息。

# 好的例子
请提供关于气候变化的五个主要科学事实，每个事实不超过两句话，并附上发现这些事实的大致年份。
```

### 2. 提供上下文

```
# 不好的例子
这段代码有什么问题？
function calculateTotal(items) {
  let total = 0;
  for(let i = 0; i <= items.length; i++) {
    total += items[i].price;
  }
  return total;
}

# 好的例子
我正在编写一个JavaScript函数来计算购物车中所有商品的总价。以下代码运行时报错，请帮我找出问题并解释原因：
function calculateTotal(items) {
  let total = 0;
  for(let i = 0; i <= items.length; i++) {
    total += items[i].price;
  }
  return total;
}
```

### 3. 指定输出格式

```
# 不好的例子
比较React和Vue的区别。

# 好的例子
请比较React和Vue框架的区别，使用以下格式：
1. 学习曲线：[React的学习曲线] vs [Vue的学习曲线]
2. 性能：[React的性能特点] vs [Vue的性能特点]
3. 社区支持：[React的社区情况] vs [Vue的社区情况]
4. 适用场景：[React适合的项目类型] vs [Vue适合的项目类型]
5. 状态管理：[React的状态管理方式] vs [Vue的状态管理方式]
```

### 4. 使用示例（少样本学习）

```
# 不好的例子
将以下句子翻译成法语。
"I would like to book a table for two people."

# 好的例子
将以下英语句子翻译成法语。以下是一些例子：

英语: "Hello, how are you?"
法语: "Bonjour, comment allez-vous?"

英语: "Where is the nearest hotel?"
法语: "Où est l'hôtel le plus proche?"

英语: "I would like to book a table for two people."
法语:
```

## 高级提示技巧

### 1. 角色提示（Role Prompting）

给模型分配一个特定的角色，可以引导它从特定的视角回答问题。

```
你是一位经验丰富的Python编程教师，专门教授初学者。请解释Python中的列表推导式概念，使用简单的语言和类比，并提供3个由简单到复杂的例子。
```

### 2. 链式思考（Chain-of-Thought）

引导模型一步步思考问题，特别适合解决复杂的推理任务。

```
问题：一个商店里，苹果的价格是3元一个，梨子是4元一个，桃子是5元一个。如果我买了2个苹果，3个梨子和1个桃子，一共花了多少钱？请一步步思考。
```

### 3. 自我批评和改进

让模型先生成回答，然后对自己的回答进行评价和改进。

```
请回答以下问题：什么是量子计算？

首先，给出一个初步回答。然后，评估你的回答的优缺点，并提供一个改进的、更全面的解释。
```

### 4. 思维树（Tree of Thoughts）

引导模型探索多个思考路径，然后选择最佳路径。

```
问题：设计一个创新的移动应用来帮助人们减少食物浪费。

请使用以下思考路径来回答：
1. 路径A：基于食物库存管理的解决方案
2. 路径B：基于社区食物共享的解决方案
3. 路径C：基于食物保存和烹饪建议的解决方案

对每个路径进行探索，然后确定哪个路径最有前景，并详细说明最终的应用设计。
```

## 常见提示模式

### 1. 总结模式

```
请总结以下文本，控制在100字以内，保留关键信息和核心观点：

[文本内容]
```

### 2. 分类模式

```
请将以下客户反馈分类为正面、负面或中性，并解释你的分类理由：

[客户反馈]
```

### 3. 扩展模式

```
请基于以下大纲扩展成一篇完整的博客文章，每个部分至少包含两段内容：

[大纲内容]
```

### 4. 比较模式

```
请比较以下两种技术的优缺点，考虑性能、易用性、成本和适用场景等方面：

技术A：[技术A描述]
技术B：[技术B描述]
```

### 5. 问答模式

```
基于以下信息回答问题：

[背景信息]

问题：[具体问题]
```

## 提示优化技巧

### 1. 迭代改进

不要期望第一次就能得到完美的提示。通过观察模型的回复，不断调整和优化你的提示。

### 2. 控制参数

除了提示本身，还可以调整模型的参数来获得更好的结果：

- **Temperature**：控制输出的随机性，值越低输出越确定
- **Top P**：控制词汇选择的多样性
- **Max Tokens**：控制回复的最大长度

### 3. 分解复杂任务

将复杂任务分解为多个简单步骤，逐步引导模型完成。

### 4. 使用分隔符

使用明显的分隔符（如 ###、---、```）来区分提示的不同部分，使结构更清晰。

```
### 指令
分析以下产品评论的情感，并提取关键优点和缺点。

### 评论
这款相机的图像质量非常出色，色彩还原准确，但电池续航时间较短，而且价格偏高。总体来说，它是一款适合专业摄影师的高端产品。

### 输出格式
情感：[正面/负面/中性]
优点：
- [优点1]
- [优点2]
缺点：
- [缺点1]
- [缺点2]
```

## 常见问题与解决方法

### 1. 模型输出不一致

**解决方法**：降低temperature参数，使用更明确的指令，提供示例输出。

### 2. 模型生成虚假信息

**解决方法**：要求模型只基于提供的信息回答，或明确指出不确定的部分。

### 3. 输出过于冗长

**解决方法**：明确指定输出长度或格式，使用max_tokens参数限制输出长度。

### 4. 模型不遵循指令

**解决方法**：将指令放在提示的开头和结尾，使用明确的格式要求，提供示例。

## 实践练习

1. **基础练习**：为以下任务设计提示
   - 生成一个产品描述
   - 总结一篇新闻文章
   - 解释一个复杂概念给10岁的孩子

2. **中级练习**：优化以下提示
   ```
   告诉我关于人工智能的信息。
   ```

3. **高级练习**：为以下复杂任务设计提示链
   - 分析一篇研究论文并提出改进建议
   - 设计一个营销策略并评估其可行性
   - 创建一个教学计划并提供教学资源

## 结论

提示工程是一门艺术，也是一门科学。通过不断实践和优化，你可以学会如何有效地与LLM交流，充分发挥它们的潜力。记住，好的提示应该清晰、具体、结构化，并且考虑到模型的能力和限制。

随着你的经验积累，你将能够设计出更加复杂和有效的提示，解决更加复杂的问题。